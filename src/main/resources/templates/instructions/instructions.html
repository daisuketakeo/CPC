<div th:fragment="body">
<script th:inline="javascript">

// 工程情報
// PROCESS_ID, 要素名, 画面フラグ 
var PROCESS = new Map([
    ['EP1', ['PrecultureKitting','2', '/manufacturing', 0]],
    ['EP2', ['Preculture'       ,'2', '/manufacturing', 1]],
    ['ET1', ['QC1'              ,'2', '/qualitycontrol', 2]],
    ['EP3', ['ExpansionKitting' ,'2', '/manufacturing', 3]],
    ['EP4', ['Expansion'        ,'2', '/manufacturing', 4]],
    ['EP5', ['BufferExchange'   ,'2', '/manufacturing', 5]],
    ['EP6', ['Freezing'         ,'2', '/manufacturing', 6]],
    ['ET2', ['QC2'              ,'3', '/qualitycontrol', 7]],
    ['ET3', ['QC3'              ,'3', '/qualitycontrol', 8]],
    ['ET4', ['QC4'              ,'3', '/qualitycontrol', 9]],
    ['BR',  ['BatchRelease'     ,'4', '/batchrelease', 10]]
])

var disp_flg = sessionStorage.getItem(['DISP_FLG']);
var create_status = /*[[${CREATE_STATUS}]]*/ '';

/***********************************
画面初期処理
***********************************/
$(function(){
	
	var item_list;
	
	// ヘッダスタイル変更
	change_header_style(disp_flg);
	
    // ヘッダメニュー変更
    $('#hamberger_menu_list').children().remove();
    $('#hamberger_menu_list').append('<li><a id="hamberger_menu1" href="javascript:void(0);">Manufacturing instructions</a></li>');
    $('#hamberger_menu_list').append('<li><a id="hamberger_menu2" href="javascript:void(0);">Manufacturing instructions by process</a></li>');

	// 一覧取得
	search();
	
	// 指図作成ボタンクリック
	$("#createbtn").click(function(){
		var select = $('[name=cmbitemlist]');
		select.children().remove();
		var option = $('<option>')
          .text('')
          .val('');
        select.append(option);
	    $.each(item_list,function(i,INSTRUCTIONS_MASTER){
	    	// 工程フロー図の工程名称セット
	    	var option = $('<option>')
	          .text(INSTRUCTIONS_MASTER.name)
	          .val(INSTRUCTIONS_MASTER.im_ID);
	        select.append(option);
	    });
		$("#itemlist").dialog("open");
	    return false;
	});
	
	// 指図リリースボタンクリック
	$("#releasebtn").click(function(){
	  if($("#batch_id").val()==''){
		  alertdialog("Please select Batch ID.");
	  }else{
		  
		  var tbodys = $("#tbl1 tbody");//全行を取得
		  
		  var created = false;
			for( var i=0,l=tbodys.length;i<l;i++ ){
				// 選択行のMATERIAL_NO取得
				var childtr = tbodys.eq(i).children();
				var childtd = $(childtr).children();
				var batch_id = $(childtd.eq(0)).text();
				var status = $(childtd.eq(4)).text();
				if(batch_id==$("#batch_id").val() && status==create_status){
					created = true;
				}
			}	
			
		  if(created){
			  $('#release_confirmdialog_label').text(
		    		  "Release instructions?\nBatch ID["+$("#batch_id").val()+"]");
	  	  	  $("#release_confirmdialog").dialog("open");
		  }else{
			  alertdialog("This batch ["+$("#batch_id").val()+"] can not release.");
		  }
	  }
	});
	
	// 指図詳細Closeボタンクリック
	$("#closetab").click(function(){
		$("#detail").hide();
	});
	
	// 指図詳細タブ設定
	$("#detail").tabs();
	
	// 品目ダイアログ
	$("#itemlist").dialog({
	  autoOpen: false,
	  title:"Item list", //タイトル
	  height: 200,
      width: 350,
	  modal: true,
	  buttons: {
	    "OK": function() {
	    	if($('[name=cmbitemlist]').val()==''){
	    		alertdialog("Please select item.");
	    	}else{
	    	  $('#create_confirmdialog_label').text(
	  	    		  "Create instructions?\n["+$('[name=cmbitemlist] option:selected').text()+"]");
	    	  $("#create_confirmdialog").dialog("open");
	    	}
	      $(this).dialog("close");
	    },
	    "Cancel": function() {
	      $(this).dialog("close");}
	  }
	});
	
	// 指図作成　確認ダイアログ
	$('#create_confirmdialog').dialog({
	  autoOpen: false,
  	  dialogClass:'confirm_dialog',
  	  modal:true, //モーダル表示
  	  title:"Confirm", //タイトル
 	  height: 200,
      width: 350,
  	  buttons: { //ボタン
  	   "OK": function() {
  	     $(this).dialog("close");
  		 // 指図作成実行
  		 //　データを送信
  		 var data = { IM_ID: $('[name=cmbitemlist]').val() };
		 var XHR = new XMLHttpRequest();
		 XHR.open( "POST", "/ajax/create_instructions");
		 XHR.setRequestHeader('Content-Type', 'application/json');
		 XHR.send(JSON.stringify(data));
		　XHR.onreadystatechange = function() {
		  if( XHR.readyState === 4 && XHR.status === 200 ) {
			// 正常終了時に処理
			// 一覧取得
			search();
		  }else{
			if(XHR.responseText==''){
			}else{
				error(XHR.responseText); //エラーダイアログ表示
			}
		　 }
		　}
  	    },
  	    "Cancel": function() {
  	      $(this).dialog("close");
  	    }
  	  }
  	});
	
	// 指図リリース　確認ダイアログ
	$('#release_confirmdialog').dialog({
	  autoOpen: false,
  	  dialogClass:'confirm_dialog',
  	  modal:true, //モーダル表示
  	  title:"Confirm", //タイトル
 	  height: 200,
      width: 350,
  	  buttons: { //ボタン
  	   "OK": function() {
  	     $(this).dialog("close");
  		 // 指図作成実行
  		 //　データを送信
  		 var data = { BATCH_ID: $("#batch_id").val() };
		 var XHR = new XMLHttpRequest();
		 XHR.open( "POST", "/ajax/release_instructions");
		 XHR.setRequestHeader('Content-Type', 'application/json');
		 XHR.send(JSON.stringify(data));
		　XHR.onreadystatechange = function() {
		  if( XHR.readyState === 4 && XHR.status === 200 ) {
			// 正常終了時に処理
			// 一覧取得
			search();
		  }else{
			if(XHR.responseText==''){
			}else{
				error(XHR.responseText); //エラーダイアログ表示
			}
		　 }
		　}
  	    },
  	    "Cancel": function() {
  	      $(this).dialog("close");
  	    }
  	  }
  	});
	
	// 指図詳細　ダイアログ
	$('#detail_dialog').dialog({
	  autoOpen: false,
  	  modal:true, //モーダル表示
  	  title:"Instructions detail", //タイトル
 	  height: 700,
      width: "100%",
  	  buttons: { //ボタン
  	   "Close": function() {
  	      $(this).dialog("close");
  	    }
  	  }
  	});
	
	// 品目リスト取得
	$.ajax({
	    type: "GET", 
	    url: '/rest/instructionsmst/select',
	}).done(function(data, dataType) {
	    var usage_arr = JSON.parse(data);
	    item_list = usage_arr.list;
	}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
	  console.log('Error : ' + errorThrown + ", Reason: " + textStatus);
	});
	
	// 初期表示時、工程フロー図非表示
	$("#process_flow").hide();
	
	// 工程フロー図 工程図クリック時処理設定
	for (let [key, value] of PROCESS) {
		$("#"+value[0]).click(function(){
			var tbodys = $("#tbl1 tbody");//全行を取得
			var status = "";
			for( var i=0,l=tbodys.length;i<l;i++ ){
				// 選択行のMATERIAL_NO取得
				var childtr = tbodys.eq(i).children();
				var childtd = $(childtr).children();
				var batch_id = $(childtd.eq(0)).text();
				if(batch_id==$("#batch_id").val()){
					status = (childtd.eq(4)).text();
				}
			}
			
			if(status==create_status){
				// ステータスが指図作成済の場合操作不可
				alertdialog(errmsg);
			}else{
				if(disp_flg==value[1]){
					// 作業手順の画面へ遷移				
					  $('<form/>', {action: value[2], method: 'post'})
					  .append($('<input/>', {type: 'hidden', name: 'PROCESS_ID', value: key}))
					  .append($('<input/>', {type: 'hidden', name: 'BATCH_ID', value: $("#batch_id").val()}))
					  .appendTo(document.body)
					  .submit();
				}else{
					// 対象工程以外は操作不可
					alertdialog(errmsg);
				}
			}
		});
	}
	
	// 操作権限チェック
	$.ajax({
	    type: "GET", 
	    url: '/ajax/check_operation_authority?WORK_GROUP=IS01',
	}).done(function(data, dataType) {
	    if(!data){
	    	$("#createbtn").prop("disabled",true);
	    	$("#releasebtn").prop("disabled",true);
	    }
	}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
	  console.log('Error : ' + errorThrown + ", Reason: " + textStatus);
	});
	
	// 製造指図メニュークリック
	$("#hamberger_menu1").click(function() {
		if($("#batch_id").val()==''){
			alertdialog("Please select batch.");
		}else{
			$("#detail").tabs(
				{ active: 0 } //タブの初期値指定
			);
			$('#detail_dialog').dialog("open");
        	$('#setbtnInsructionsDetail').trigger('click', [INSTRUCTIONS_TABLE.batch_ID]);
        	//$('#setbtnProcInsructions').trigger('click', [INSTRUCTIONS_TABLE.batch_ID]);
		}
	});
	
	// 工程別製造指図メニュークリック
	$("#hamberger_menu2").click(function() {
		if($("#batch_id").val()==''){
			alertdialog("Please select batch.");
		}else{
			$("#detail").tabs(
				{ active: 1 } //タブの初期値指定
			);
			$('#detail_dialog').dialog("open");
			//$('#setbtnInsructionsDetail').trigger('click', [INSTRUCTIONS_TABLE.batch_ID]);
        	$('#setbtnProcInsructions').trigger('click', [INSTRUCTIONS_TABLE.batch_ID]);
		}
	});
});

/***********************************
受入一覧表示
***********************************/
function search(){
	
	// 保持データクリア
	//$("#batch_id").val("");
	
	// 工程フロー図非表示
	//$("#process_flow").hide();
	
	// tbodyをクリア
	$("#tbl1 > tbody").html("");
	
	// テーブル初期状態セット
	tbody_default("#tbl1");
	
	// テーブルの明細部分(tbody)を生成
	$.ajax({
	    type: "GET", 
	    url: '/rest/instructions/select',
	}).done(function(data, dataType) {
		
	    var usage_arr = JSON.parse(data);
	    const status_json = JSON.parse($("#status_list").val());
	    
	    //データをテーブル形式にする 
	    $.each(usage_arr.list,function(i,INSTRUCTIONS_TABLE){
	    	var tbody = $('<tbody />');
	    	
	        var tr1 = $('<tr id="tr'+INSTRUCTIONS_TABLE.batch_ID+'"/>');
	        
	        var tdbatchid = $('<td/>');
	        var abatchid = $("<a></a>", {
	        	  href: "#",
	        	  class: "blank",
	        	  text: INSTRUCTIONS_TABLE.batch_ID,
	        	});
	        
	        $(abatchid).on('click',function(){
	        	$("#detail").tabs(
    				{ active: 0 } //タブの初期値指定
    			);
	        	$('#detail_dialog').dialog("open");
	        	$('#setbtnInsructionsDetail').trigger('click', [INSTRUCTIONS_TABLE.batch_ID]);
	        	//$('#setbtnProcInsructions').trigger('click', [INSTRUCTIONS_TABLE.batch_ID]);
        	});
	        
	        tdbatchid.append(abatchid);
	        tr1.append(tdbatchid);
	        tr1.append($('<td/>').text(INSTRUCTIONS_TABLE.protocol));
	        tr1.append($('<td/>').text(INSTRUCTIONS_TABLE.starting_TIME));
	        tr1.append($('<td/>').text(INSTRUCTIONS_TABLE.finish_TIME));
	        
	        var tdstatus = $('<td/>');
	        tdstatus.text(status_json[INSTRUCTIONS_TABLE.status]);
	        
	        // 逸脱チェック
	     	// 作業グループステータス取得
			var args = "?BATCH_ID="+INSTRUCTIONS_TABLE.batch_ID;
			$.ajax({
			type: "GET", 
			url: '/rest/workgroupstatus/select'+args,
			}).done(function(wgrpdata, wgrpdataType) {
			
				var wgrp_arr = JSON.parse(wgrpdata);
				var diviation_flg = false;
				$.each(wgrp_arr.list,function(j,WORK_GROUP_STATUS_TABLE){
					if(WORK_GROUP_STATUS_TABLE.status==wgrp_diviation_status){
						diviation_flg = true;
					}
				});
				
				if(diviation_flg){
					// 作業グループステータスに１つ以上逸脱があれば
					// ステータスを逸脱に変更＋逸脱アイコン表示
					tdstatus.text(deviation);
			        tdstatus.append($("<img></img>", {
			        	  id: "divaicon"+INSTRUCTIONS_TABLE.batch_ID,
			        	  src: "/images/exclamation_mark.png",
			        	  addClass: "aicon",
			        	}));
				}
			
			}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
				console.log('Error : ' + errorThrown + ", Reason: " + textStatus);
			});
			   
	        tr1.append(tdstatus);
	        tbody.append(tr1);
	        
	        $('#tbl1').append(tbody);
	        
	        // 一覧の行ダブルクリック
	        $('#tr'+INSTRUCTIONS_TABLE.batch_ID).dblclick(function(){
	        	alert('「Batch Record Review」 Open ['+INSTRUCTIONS_TABLE.batch_ID+']');
	        });
	        // 一覧の行クリック
	        $('#tr'+INSTRUCTIONS_TABLE.batch_ID).click(function(){
	        	select_row(this);
	        });
	        
	        if($("#batch_id").val()==INSTRUCTIONS_TABLE.batch_ID){
	        	select_row($('#tr'+INSTRUCTIONS_TABLE.batch_ID));
	        }
	    });

	}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
	  console.log('Error : ' + errorThrown + ", Reason: " + textStatus);
	});
	
	// 工程フロー図の工程名称取得
	$.ajax({
	    type: "GET", 
	    url: '/rest/processmst/select',
	}).done(function(data, dataType) {
	    var usage_arr = JSON.parse(data); 
	    $.each(usage_arr.list,function(i,PROCESS_MASTER){
	    	// 工程フロー図の工程名称セット
	    	for (let [key, value] of PROCESS) {
	    		if(PROCESS_MASTER.process_ID==key){
		    		$('#lbl'+value[0]).text(PROCESS_MASTER.process_NAME);
		    	}
	    	}
	    });
	}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
	  console.log('Error : ' + errorThrown + ", Reason: " + textStatus);
	});
}

/***********************************
一覧の行クリック
***********************************/
function select_row(obj){

	// テーブル初期状態セット
	tbody_default("#tbl1");
	
	var tb = $(obj).parent();
	
	// テーブル行選択状態セット
	row_click($(tb));
	
	// 選択行のMATERIAL_NO取得
	var childtr = $(tb).children();
	var childtd = $(childtr).children();
	var batch_id = $(childtd.eq(0)).text();

	// データ保持
	$("#batch_id").val(batch_id);
	
	// 工程フロー図表示
	$("#process_flow").show();
	
	// 工程図のステータスセット
	/*
	for (let [key, value] of PROCESS) {
		setProcessStatus(batch_id, key);
	}
	*/
	
	var args = "?BATCH_ID="+batch_id;

	// 工程ステータス取得
	$.ajax({
	type: "GET", 
	url: '/rest/processstatus/select'+args,
	}).done(function(data, dataType) {
	
		var usage_arr = JSON.parse(data);
		var end_process_count = 0;
		$.each(usage_arr.list,function(i,PROCESS_STATUS_TABLE){
			
			var process_id = PROCESS_STATUS_TABLE.process_ID;
			//console.log(process_id);
			
			var end_flg = false;
			var current_flg = false;
			
			// 完了チェック
			for (const end of end_status) {
				if(PROCESS_STATUS_TABLE.status==end){
					end_flg = true;
				}
			}
			if(end_flg){
				// 完了アイコン表示
				$('#cm'+PROCESS.get(process_id)[0]).show();
				// 最後の完了工程を保持
				if(PROCESS.get(process_id)[3]>end_process_count){
					end_process_count = PROCESS.get(process_id)[3];
				}
			}else{
				$('#cm'+PROCESS.get(process_id)[0]).hide();
			}
			
			// 仕掛チェック
			for (const current of current_status) {
				if(PROCESS_STATUS_TABLE.status==current){
					current_flg = true;
				}
			}
			if(current_flg){
				// 仕掛アイコン表示
				$('#ar'+PROCESS.get(process_id)[0]).show();
			}else{
				$('#ar'+PROCESS.get(process_id)[0]).hide();
			}
			
			var args2 = "?BATCH_ID="+batch_id+
						"&PROCESS_ID="+process_id;
			
			// 作業グループステータス取得
			$.ajax({
			type: "GET", 
			url: '/rest/workgroupstatus/select'+args2,
			}).done(function(data2, dataType) {
			
				var usage_arr2 = JSON.parse(data2);
				var diviation_flg = false;
				$.each(usage_arr2.list,function(j,WORK_GROUP_STATUS_TABLE){
					if(WORK_GROUP_STATUS_TABLE.status==wgrp_diviation_status){
						diviation_flg = true;
					}
				});
				
				if(diviation_flg){
				// 作業グループステータスに１つ以上逸脱があれば逸脱アイコン表示
					$('#ex'+PROCESS.get(process_id)[0]).show();
				}else{
					$('#ex'+PROCESS.get(process_id)[0]).hide();
				}
			
			}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
				console.log('Error : ' + errorThrown + ", Reason: " + textStatus);
			});
			
		});
		
		if(end_process_count>0){
			// 完了工程があればフロー図を最後の完了工程の次工程を一番左に表示
			var end_process = '#lbl'+PROCESS.get('BR')[0];
			for (let [key, value] of PROCESS) {
				if(value[3]==(end_process_count+1)){
					end_process = '#lbl'+PROCESS.get(key)[0];
				}
			}
			console.log(end_process);
			$("#process_flow").animate({scrollLeft:$(end_process).offset().left-30});
		}else{
			// 完了工程がなければ先頭工程を一番左に表示
			$("#process_flow").animate({scrollLeft:$('#lbl'+PROCESS.get('EP1')[0]).offset().left-30});
		}
		
	}).fail(function(XMLHttpRequest, textStatus, errorThrown) {
		console.log('Error : ' + errorThrown + ", Reason: " + textStatus);
	});
	
}

</script>
<!-- コンテンツ -->
<input type="hidden" id="batch_id" th:value="${BATCH_ID}">
<input type="hidden" id="status_list" th:value="${STATUS_LIST}">
<div class="disopaypanel">

 	<div class="headername"><h4>Instructions</h4></div>
    <!-- 指図一覧 -->
    <div class="tablepanel">
		<table id="tbl1" class="tableArea">
			<thead>
				<tr>
					<th class="th_sticky" style="min-width:150px">Batch ID</th>
					<th class="th_sticky" style="min-width:150px">Protocol</th>
					<th class="th_sticky" style="min-width:150px">Starting Time</th>
					<th class="th_sticky" style="min-width:150px">Finish Time</th>
					<th class="th_sticky" style="min-width:80px">Status</th>
				</tr>
	        </thead>
		</table>
	</div>
    <div class="buttonpanel">
    	<table>
    		<tr>
    			<td style="width:80%;">
    			</td>
    			<td style="width:10%;">
    				<input type="button" id="createbtn" value="Create" class="btn custombtn">
    			</td>
    			<td style="width:10%;">
    				<input type="button" id="releasebtn" value="Release" class="btn custombtn">
    			</td>
    		</tr>
    	</table>
    </div>​
    
	<div id="process_flow" class="pflowpanel">
	<!-- 工程フロー図 -->
	<table>
		<tr>
			<td>
				<div class="square">
					<img id="cmPrecultureKitting" alt="" class="aicon square_endaicon" src="/images/check_mark.png">
					<img id="arPrecultureKitting" alt="" class="aicon square_endaicon" src="/images/arrow.png">
					<label id="lblPrecultureKitting" class="square_label"></label>
					<img id="exPrecultureKitting" alt="" class="aicon square_divaicon" src="/images/exclamation_mark.png">
					<div id="PrecultureKitting" class="click_div"></div>
				</div>
			</td>
			<td style="width:10px;"><div class="arrow arrow1"></div></td>
			<td>
				<div class="square">
					<img id="cmPreculture" alt="" class="aicon square_endaicon" src="/images/check_mark.png">
					<img id="arPreculture" alt="" class="aicon square_endaicon" src="/images/arrow.png">
					<label id="lblPreculture" class="square_label"></label>
					<img id="exPreculture" alt="" class="aicon square_divaicon" src="/images/exclamation_mark.png">
					<div id="Preculture" class="click_div"></div>
				</div>
			</td>
			<td style="width:10px;"><div class="arrow arrow1"></div></td>
			<td>
				<div class="rhombus" style="left:20px;">
					<img id="cmQC1" alt="" class="aicon rhombus_endaicon" src="/images/check_mark.png">
					<img id="arQC1" alt="" class="aicon rhombus_endaicon" src="/images/arrow.png">
					<label id="lblQC1" class="rhombus_label"></label>
					<img id="exQC1" alt="" class="aicon rhombus_divaicon" src="/images/exclamation_mark.png">
					<div id="QC1" class="click_div"></div>
				</div>
			</td>
			<td style="width:10px;"><div class="arrow arrow1" style="left:38px;"></div></td>
			<td>
				<div class="square" style="left:40px;">
					<img id="cmExpansionKitting" alt="" class="aicon square_endaicon" src="/images/check_mark.png">
					<img id="arExpansionKitting" alt="" class="aicon square_endaicon" src="/images/arrow.png">
					<label id="lblExpansionKitting" class="square_label"></label>
					<img id="exExpansionKitting" alt="" class="aicon square_divaicon" src="/images/exclamation_mark.png">
					<div id="ExpansionKitting" class="click_div"></div>
				</div>
			</td>
			<td style="width:10px;"><div class="arrow arrow1" style="left:38px;"></div></td>
			<td>
				<div class="square" style="left:40px;">
					<img alt="" class="aicon square_arrow2" src="/images/arrow2.png">
					<img id="cmExpansion" alt="" class="aicon square_endaicon" src="/images/check_mark.png">
					<img id="arExpansion" alt="" class="aicon square_endaicon" src="/images/arrow.png">
					<label id="lblExpansion" class="square_label"></label>
					<img id="exExpansion" alt="" class="aicon square_divaicon" src="/images/exclamation_mark.png">
					<div id="Expansion" class="click_div"></div>
				</div>
			</td>
			<td style="width:10px;"><div class="arrow arrow1" style="left:38px;"></div></td>
			<td>
				<div class="square" style="left:40px;">
					<img alt="" class="aicon square_arrow3" src="/images/arrow3.png">
					<img id="cmBufferExchange" alt="" class="aicon square_endaicon" src="/images/check_mark.png">
					<img id="arBufferExchange" alt="" class="aicon square_endaicon" src="/images/arrow.png">
					<label id="lblBufferExchange" class="square_label"></label>
					<img id="exBufferExchange" alt="" class="aicon square_divaicon" src="/images/exclamation_mark.png">
					<div id="BufferExchange" class="click_div"></div>
				</div>
			</td>
			<td style="width:10px;"><div class="arrow arrow1" style="left:38px;"></div></td>
			<td>
				<div class="square" style="left:40px;">
					<img id="cmFreezing" alt="" class="aicon square_endaicon" src="/images/check_mark.png">
					<img id="arFreezing" alt="" class="aicon square_endaicon" src="/images/arrow.png">
					<label id="lblFreezing" class="square_label"></label>
					<img id="exFreezing" alt="" class="aicon square_divaicon" src="/images/exclamation_mark.png">
					<div id="Freezing" class="click_div"></div>
				</div>
			</td>
			<td style="width:10px;"><div class="arrow arrow1" style="left:43px;"></div></td>
			<td>
				<table>
					<tr><td style="padding:5px;">
						<div class="rhombus" style="left:60px;">
							<img alt="" class="aicon rhombus_arrow4" src="/images/arrow4.png">
							<img id="cmQC2" alt="" class="aicon rhombus_endaicon" src="/images/check_mark.png">
							<img id="arQC2" alt="" class="aicon rhombus_endaicon" src="/images/arrow.png">
							<label id="lblQC2" class="rhombus_label"></label>
							<img id="exQC2" alt="" class="aicon rhombus_divaicon" src="/images/exclamation_mark.png">
							<div id="QC2" class="click_div"></div>
						</div>
					</td></tr>
					<tr><td style="padding:5px;">
						<div class="rhombus" style="left:60px;">
							<img id="cmQC4" alt="" class="aicon rhombus_endaicon" src="/images/check_mark.png">
							<img id="arQC4" alt="" class="aicon rhombus_endaicon" src="/images/arrow.png">
							<label id="lblQC4" class="rhombus_label"></label>
							<img id="exQC4" alt="" class="aicon rhombus_divaicon" src="/images/exclamation_mark.png">
							<div id="QC4" class="click_div"></div>
						</div>
					</td></tr>
					<tr><td style="padding:5px;">
						<div class="rhombus" style="left:60px;">
							<img alt="" class="aicon rhombus_arrow5" src="/images/arrow5.png">
							<img id="cmQC3" alt="" class="aicon rhombus_endaicon" src="/images/check_mark.png">
							<img id="arQC3" alt="" class="aicon rhombus_endaicon" src="/images/arrow.png">
							<label id="lblQC3" class="rhombus_label"></label>
							<img id="exQC3" alt="" class="aicon rhombus_divaicon" src="/images/exclamation_mark.png">
							<div id="QC3" class="click_div"></div>
						</div>
					</td></tr>
				</table>
			</td>
			<td><div class="arrow arrow1" style="left:75px;"></div></td>
			<td>
				<div class="square" style="left:80px;">
					<img id="cmBatchRelease" alt="" class="aicon square_endaicon" src="/images/check_mark.png">
					<img id="arBatchRelease" alt="" class="aicon square_endaicon" src="/images/arrow.png">
					<label id="lblBatchRelease" class="square_label"></label>
					<img id="exBatchRelease" alt="" class="aicon square_divaicon" src="/images/exclamation_mark.png">
					<div id="BatchRelease" class="click_div"></div>
				</div>
			</td>
		</tr>
	</table>
  </div>
</div>

<!-- 品目ダイアログ  -->
<div id="itemlist" title="Item list">
  <table>
    <tr>
      <th>Please select item.</th>
    </tr>
    <tr>
      <td>
      	<select id="cmbitemlist" name="cmbitemlist">
      		<option></option>
      	</select>
      </td>
    </tr>   
  </table>
</div>
<!-- 指図作成　確認ダイアログ  -->
<div id="create_confirmdialog">
	<label id="create_confirmdialog_label" style="white-space: pre-line;"></label>
</div>
<!-- 指図リリース　確認ダイアログ  -->
<div id="release_confirmdialog">
	<label id="release_confirmdialog_label" style="white-space: pre-line;"></label>
</div>
<!-- 指図詳細　ダイアログ  -->
<div id="detail_dialog">
	<div id="detail" style="height:100%;">
		<ul>
			<li><a href="/instructions_detail">Manufacturing instructions</a></li>
			<li><a href="/proc_instructions">Manufacturing instructions by process</a></li>
		</ul>
	</div>
</div>
